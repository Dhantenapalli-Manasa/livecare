{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Google Map Location</title>

  <style>
    body { font-family: Arial, Helvetica, sans-serif; margin: 0; padding: 0; }
    header { padding: 12px; background:#0b63a9; color: white; }
    main { padding: 12px; }

    #gmap {
      width: 100%;
      height: 80vh;
      border: 0;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.20);
    }

    .controls { margin-top: 12px; display: flex; gap: 12px; flex-wrap: wrap; }
    button {
      padding: 10px 14px;
      background:#0b63a9;
      color:white;
      border: none;
      border-radius: 6px;
      cursor:pointer;
    }
  </style>

  <script>
    // ---- USE MY LOCATION ----
    function useMyLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success, error);
      } else {
        alert("Geolocation is not supported by this browser.");
      }

      function success(position) {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;

        document.getElementById("gmap").src =
          `https://www.google.com/maps?q=${lat},${lng}&z=15&output=embed`;
      }

      function error() {
        alert("Unable to fetch your location.");
      }
    }

    // ---- TYPE LOCATION MANUALLY ----
    function enterLocation() {
      let place = prompt("Enter a city, area, or hospital name:");

      if (place && place.trim() !== "") {
        document.getElementById("gmap").src =
          `https://www.google.com/maps?q=${encodeURIComponent(place)}&z=14&output=embed`;
      }
    }
  </script>

</head>

<body>

<header>
  <h1>Google Map Location</h1>
</header>

<main>

  <!-- CLEAN GOOGLE MAP (NO PB PARAMETER) -->
  <iframe
    id="gmap"
    src="https://www.google.com/maps?q=Hyderabad&output=embed"
    loading="lazy">
  </iframe>

  <!-- BUTTONS -->
  <div class="controls">

      <button onclick="useMyLocation()">üìç Use My Location</button>

      <button onclick="enterLocation()" style="background:#444;">
        ‚úèÔ∏è Type Location Manually
      </button>

      <button onclick="window.location.href= " {% url 'hospitalavailable' %}" style="background:green;">
        üè• Find Hospitals
      </button>

      <button onclick="window.location.href='/'" style="background:red;">
        ‚¨Ö Back to Landing Page
      </button>

  </div>

</main>

</body>
</html>